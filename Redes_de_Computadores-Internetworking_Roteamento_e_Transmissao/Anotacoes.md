DATA: 07/Agosto/2025
# Caracterização e introdução
- Ips privados
    - 10 -> rede inteira
    - 172
    - 192.68 ou derivados
    - 169.alguma coisa
        - enderço da máquina
        - auodesignação quando o DHCP ou n existe config na rede
        - vale pra IPv4 e IPv6
- conexões sempre se baseiam no IP de destino
- IP indicado de origem não é público
- ARP é um auxiliar pra puxar o mac address da máquina e estabelecer connection
- sistêma autônomo (intranet)
    - sai por 1 ou mais provedores
    - organização própria
    - BGP
- HUBs usam barramento
    - CSNA/CD
- Switch faz full duplex
    - várias portas
- VLANS são consideradas redes (interfaces diferentes)
    - num Switch dá pra fazer um backbone e passar todas no mesmo lugar
- Datagrama é o sistema TCP/IP
- cada segmentação (pacote) é um datagrama diferente
    - IP origem/destino
    - default - roteamento baseado em IP de destino
- tratamento de dado e voz é bastante diferente
    - voz precisa de QoS
    - algumas tem circuitos dedicados
- OSI é a o modelo mais simples e didático (não é utilizado)
    - feito pra estudo, internet hoje usa TCP/IP
- as camadas se comunicam apenas entre si
- em uma tradução

| TCP/IP              | OSI Model          
| --------------------|-------------------
| Application Layer   | Application Layer
|                     | Presentation Layer
|                     | Session Layer
| TransportLayer      | Transport Layer
| Internet Layer      | Network Layer
| Network Access Layer| Data Link Layer
|                     | Physical Layer

- os headers dos protocolos todos tem todas as camadas embeddadas
- usualmente todo mundo tem uma intranet (rede privada) se tem um modem dentro de casa - praticamente a intranet existe até chegar na concessionária e ir pra internet
- roteadores primeiro roteiam o caminho (dnâmico - datagramas) e depois encaminham (stream de dados/pacotes)
- Datagramas apenas mandam os dados e esperam que eles cheguem no destino (pra UDP)
    - TCP/IP ainda tenta mandar um ACK pra saber que o destino existe
        - mas não é uma conexão virtual direta

DATA: 14/Agosto/2025
# Topologia IPv4
- Na camada de rede (IP) temos a seleção de melhor caminho pelo sistem
- rede da unisinos é um sistema autômo
    - não recebe IP do exterior - dona dos IPs
    - Pode até vender
- IP não trata de perda de pacotes - camadas superiores resolvem (TCP)
- Ethernet normalmente consome 1500bytes
    - padrão
    - Existe o Jumbo frame - 9000 bytes
- os pacotes precisam ser todos unidos no destino antes de mandar pra camada de transporte
    - caso contrário é td descartado
- subredes usam as máscaras de rede
    - subredes tem o endereço de host (.0 -> tds os bits em zero) e endereço de broadcast (.255 -> todos os bits em 1)
    - o barra significa quantos bits tem o valor 1 na máscara
- a internet é descentralizada
    - caso não o fosse poderia ser problemática
    - não seria tão escalável quanto é atualmente
    - era possível, mas o departamento de defesa queria algo desse tipo
    - programação *best-effort* -> não é confiável (IP)
        - quem resolve esses problemas são as camdas superiores
- os fragmentos possuem identificação dentro da rede e sempre precisam avisar o receptor se mais estão à caminho
- para comunicação, todos os dispositivos precisam de um endereço IP
    - é possível a comunicação com o endereço MAC ou um IP designado para pedir um IP ao roteador (quem controla e limita os IPs)
    - nesse *range* de IPs, o primeiro e o último são reservados
        - 223.1.1.0 -> endereço de rede
        - 223.1.1.255 -> endereço de broadcast
        - não necessariamente esses endereços serão com o final .0 ou .255
            - redes mescladas (somadas) podem ter esses endereços como HOST tranquilamente
        - uma máscara 223.1.1.0/24 significa que 24 bits mais a esquerda definem o endereço de rede e o resto o endereço de host
            2-4-8-16-32-64-128-**256** endereços de host.
- DHCP *Dynamic Host Configuration Protocol*
    - protocolo de internet
    - cliente-servido
- timestamp sempre tem 32bits
- construção da internet é baseada em sistêmas autônomos que se comunicam com interfaces padrões ou inventadas entre as duas partes
    - qql coisa que funcione entre uma comunicação de 2 endpoints é válido
- O IP não trata pacotes perdidos, ele está mais preocupado com roteamento do que a entrega mesmo
- IANA - *Internet Assigned Numbers Authority* - órgão organizador da entrega de endereços IP
-  

DATA: 21/Aug/2025
# Roteamento - Conceitos iniciais
- forma da informação chegar no ponto A até o ponto B
- menor distância não é necessariamente o caminho mais curto (número de saltos)
    - o número de banda pode variar bastante
- nem sempre as entidades de backbone são operadoras
    - existem inter-operadoras
        - VIVO chegar até a AT&T
- ISP - Tier 3
    - próximo do user
    - normalmente empresas
- ISP - Tier 2
    - só conecta grandes usuários e operadoras
- ISP - Tier 3
    - vazão de banda
    - conexões grandes
- IXP
    - Internet Exchange Point - PTT - Ponto de Troca de Tráfego
    - links contratados de conexão entre operadoras
    - quando operadores contratam tiers mais altos elas precisam pagar
- roteamento
    - direto
        - tier 1 e 2
        - host destino na mesma rede
        - pega o endereço IP e máscara pra ver se está na mesma rede
            - IP binário
            - máscara binária
            - operação AND
            - se o resultado do IP host AND máscara for igual destinatário AND máscara -> é a mesma rede
    - indireto
        - fora do mesmo segmento de rede
        - vai pra um gateway
    - intra-domínio
        - dentro da operadora
        - datagramas passam por dentro da operadora
    - inter-domínio
        - levando pra outro sistema autônomo (e.g. outra operadora)
- quanto mais próximo da ponta, menos dinâmico e menos dependências de protocolos
    - inverta quando estiver entrando
- usa-se o endereço MAC do default Gateway
    - Layer 2
- equipamentos físicos reais com tables de roteamento
    - se o roteador vê que não é pra ele, ele precisa escoar pra alguém
        - decisão feita com base na table de roteamento
- operadores normalmente escondem os IPs mais específicos por segurança 
    - começaram a colocar IPs privados pra gerência do roteador
- table de roteamento != table de encaminhamento
    - seleção de melhor caminho
    - tables têm endereços de rede não de hosts
    - quanto mais pra dentro, mais genérica é a rota
- próximo passo é usar o IP destino
    - varia de algoritmo - pode nao conhecer o caminho completo
- protocolos diferentes podem dar subsídios para outros
- diretamente conectado - rota estática - table de roteamento - métrica de roteamento (pesos - podem ser alterados para mudar comportamento)
- como essas tables são montadas
    - no mínimo reconhece as interfaces pra colocar o default
    - algoritmos de roteamento
    - host final tem rota por ThCP
        - o problema é a rota entre roteadores
    - tabela de roteamento é montada igual q qql forma
    - roteamento estático fica extremamente complexo pra redes médias já
    - dinâmicos pode aumentar as redes e manter o funcionamento
        - vetor distância
            - grande problema é como a informação se propaga para todos os equipamentos
                - tempo de adaptação -> protocolo bastante lento
            - os vizinhos pegam as tabelas dos vizinhos e trocam figurinhas
                - espalhamento de tabelas -> flooding
                - o problema é se alguma coisa cair
        - estado de enlace
            - monta um mapa topológico em estado de link
            - peso
            - banda
            - etc
            - OSPF - Open Shortest Path First
            - troca informações somente entre roteadores imediatamente ligados a eles
            - SPF - Shortest Path First
                - Dijkstra e anúncios pra criar a topologia
        - vetor de caminhos
            - labels -> determinação do sistema autônomo
            - caminhos pré-montados por sistemas autônomos
            - prfixo de rede
            - BGP - Border Gateway Protocol
- a grande filosofia do roteamento é rotear todos sem prejudicar nenhum
- rotas default dos roteadores vêm "de fábrica"
- a equação de Bellman-Ford é utilizada para geração de caminhos mínimos e é mais ou menos assim:
    d_x(y) = min_v{c(x,v) + d_v(y)}
    - dx(y) é o custo do caminho mínimo de x para y
    - minv é feito para todos os vizinhos v de x
    - c(x,v) é o custo do caminho de x para v
    - dv(y) é o custo do caminho de v para y
- Um algoritmo BGP serve basicamente para controle de borda (literal *Border Gateway Control*)

DATA: 28/Agosto/2025
# Algoritmos de roteamento
- algoritmos de roteamento têm relações com os demais componentes de roteamento de um roteador (dã)
    - mas eles ainda tem problemas
- Vetor de distância
    - preenche todos os nós com as distâncias
        - *flooding*
    - quando um valor é alterado, ele demora até ser propagado
        - isso gera inconsistências na rede e pode gerar *loops*
            - principalmente quando os nós ainda não se comunicaram para atualizarem suas tabelas de roteamento
    - *couting to infinity*
        - a descrição desse problema consistem em um link quebrado, uma tabela atualizada, só aquele caminho e tabelas desatualzadas na rede para trás
        - uma tentativa de resolução é o **horizonte dividido**, que só funciona com 2 nós vizinhos
- *Routing Information Protocol (RIP)*
    - protocolo de roteamento intra-domínio (descarta roteadores depois do de borda)
    - RIP Advertisement é outro nome para a mensagem do protocolo (????)
    - utiliza a equação de Bellman-Ford e armazena apenas a melhor rota
- *Open Shortest Path First (OSPF)*
    - IGP (Interior Gateway Protocol) que usa Dijkstra e supre as lacunas do RIP
    - temos uma definição de ¨backbone"para o local
        - a coms passa por ele
    - possibilidade de comunicação entre sistemas autônomos
    - é ele que cola a internet
    - assim como APIs, o protocolo tbm tem trocas internas de mensageria

DATA: 04/Setembro/2025
# Network Address Translation (NAT)
- normalmente o endereço host da máquina é diferente do endereço IPv4 que os sites que mostram o host apresentam
    - dado o fato que esses sites mostram o valor que a operadora (Sistema Autônomo que estamos conectados) mostra pra internet
    - os IPs que a máquina vê são sempre IPs internos ao SA
    - isso acontece porque o IPv4 é bastante limitado (2³²)
    - IPv6 é a saída viável mas é bastante caro de implemetar e atualizar todos os sistemas
        - existe uma grande quantidade de sistemas hoje que não tem nem ondição de entender protocolos IPv6
        - um caminho bem grande já foi trilhado
- endereço IP é normalmente mascarado
- sobrevida do IPv4 permitiu endereços serem usados em qql lugar, menos na internet
    - IPs reaproveitados
- roteador pode fazer NAT
- Wireshark é uma ótima máquina pra esse tipo de monitoramento
- NAT são 2 firewalls que "fingem" uma rede de transição e mandam pra outro lugar com a mesma rede
    - existe um endereço intermediário que serve como isca para a passagem por 2 firewalls até chegar na rede com o mesmo endereço7
- NAT de origem - trocar o IP da origem do pacote para a interface (router) antes do 1° firewall
    - no 2° firewall mantem o origem do firewall 1 e troca o destino para o IP original (NAT destino)
- os firewalls são os próprios default gateways, não é necessário alterar
- NAT reverso é necessário  
    - dá pra settar que o pacote veio como uma tradução
- não existe mais IPv4 para aquisição
    - nao tem mais o que montar/fazer
    - 2³²
- IPv6 soluciona o problema do IPv4 - a questão que fica é a transição
    - já existem lugaresm que responem em IPv6 e IPv4
- sistemas convencionais funcionam apenas para IPv4
    - transição é bastante lenta
    - aplicações mto antigas podem nem entender as interfaces
    - nessa onda, IPv4s privados foram designados
        - 10.0.0.0: uma única rede Classe A (8 bits de máscara de sub-rede)
        - 172.16.0.0 até 172.31.0.0: 16 redes Classe B (16 bits de máscara de sub-rede)
        - 192.168.0.0 até 192.168.255.0: 256 redes classe C (24 bits de máscara de sub-rede)
        - IPs privados podem ser utilizados à bel prazer, desde que não comuniquem com o mundo externo
            - por isso que o NAT existe
- durante a migração, dá pra usar os blocos IPv6 pra fazer a comunicação interna
    - privada, sem acesso à internet
- use blocos não publicados
    - se calhar de ser um site q tu settou o modem como DHCP a requisição nunca vai sair da rede local
- aumenta a segurança no sentido de esconder a infra-estrutura
- o servidor NAT fica no meio do caminho da comunicação entre a borda e o Sistema Autônomo
    - serve bastante como um gargalo - apenas um endereço de IP que segura diversos depois dele
    - funciona bem, mas esse é justamente o problema dele, é um gargado pros SA
    - pode aumentar a segurança no sentido de esconder o endereço IP interno - não dá pra chegar nele diretamente - mas é uma segurança meio falsa
    - conexões de fora pra dento podem enfrentar problemas (pacotes perdidos
    - Universal Plug and Play (UPnP) pode ajudar, mas serve como falha de segurança
    - checksum precisa ser recalculado sempre
    - quebra conectividade fim-a-afim

DATA: 11/Setembro/2025
# Internet Control Message Protocol (ICMP)
- IP fornece um serviço de conexao que apresenta poucos problemas
    - mas ele nao é confiável
    - diversos problemas podem ocorrer no meio da rede e ICMP serve como a mensageria que entrega aos *endpoints* as informações do que rola na rede
- DMZ - Zona Desmilitarizada
    - interessante usar com NAT pra isolar do restante
    - interessante como robustez contra ataques
- IP de origem é definido pelo IP da interface quando exposta ao tráfego
- ICMP é pra algum controle do pacote 
    - tempo de rede
    - ritmo de tráfego
    - manda o retorno pro sender do pacote que n chegou
- "Destination Unreacheable" é mandado por um roteador no meio do caminho com ICMP
- ICMP precisa do IP pra funcionar, mas está acima do IP (camada 4?)
    - Talvez um 3,5
- auxilia o roteador no processo de queue
- Switch Fabric é do roteador e faz as conexões entre filas de entrada e saída
    - congestionamentos acontecem
    - controle de fluxo
    - transmissor rápido
        - exacerbação da taxa de transmissão
- atuação em nível de rede
- mensageria de erro e controle entre roteadores
- não torna o IP confiável, apenas informa dos erros
- sem correção de erros (não é a preocupação do IP)
- mensageria genérica pro Host
    - orbital do problema
- só reporta erros de pacotes IP
    - o *header* do report pega a informação de onde parou e retransmite para informar onde o pacote parou (onde aconteceu o erro)
- *Redirect* pra melhor rota
    - ICMP identifica loops de roteamento
- toda tráfico cai no *input* firewall - tráfego do *output* tá atravessando o **Firewall**
- descarte não é descaso
    - entregas e problemas são enviados pelo ICMP
    - identifica a origem sempre
    - isso não é válido com firewalls bloqueando conexões
        - impede onerar o firewall
- até pode causar congestionamento (problemas de **forwarding**)
- **ICMP redirect** manda mensageria para alteração de rotas
- proxies acontecem utiizando browsers
- *Default Gateway* deveria saber as rotas (internas inclusive)
    - o ICMP pode enviar a rota interna correta na primeira tentativa de acesso de rede
- Detecção de rotas circulares longas
    - TTL - **Time to Live**
    - mensgem de TTL pode ludibriar potenciais invasores
    - mensageria anônima
- hosts são usualmente abertos
    - tem um dos EUA de fácil acesso para testar visibilidade dos servidores/páginas
- ICMP auxilia a interromper a transmissão do UDP - manda um destination unreacheable
- ICMP também auxilia pra troca de rotas e atualização de tabelas de roteamento

DATA: 18/Setembro/2025
# Roteadores
- ligação entre redes distintas
    - diferente de Bridge - isso aqui é uma tecnologia X conversando uma tecnologia Y
- ASICS - Application Specific INtegrated Circuit
- SO especializado
    - Cisco IOS
    - Juniper JUNOS
- linux é bastante útil pra fazer modificação e adaptar ao hardware
- eve.com pode ser útil
- LInux pode fazer o roteamento IPv4
    - só não fala protocolos de roteamento
- roteador pode fazer a função de firewall, mas não faz tudo
    - stateless
- composto por routing processor
- busca binária pode ser lenta em backbones
- memória é dada por interface ao invés de um buffer
- crossbar não atrapalha outras filas
- existe enfilaremento tanto pra input quanto pra output
- QoS só faz sentido se tem congestionamento
    - ainda dá pra priorizar, mas é diferente
    - validação é em outro momento
- roteadores pequenos podem ser usados dentro do sistema operacional comum
    - apesar de ser pouco recomendado
- roteadores empresariais são mais robustos
    - QoS
    - Vlans
    - firewalls
    - custo baixo se comparado com o poder de roteamento
- Edge routers precisam de robustes para comunicação com recursos fora dos provedores
    - usualmente *edge* routers se comunicam com outros edge routers
- aqui as portas são consideradas as interfaces mesmo
- buscas em memórias desses roteadores (portas de entrada) são todas em tempo constante
    - de outra forma elas quebrariam a conectividade da internet
- processamento de camadas física e de enlace
- em comutações por memória, normalmente sua velocidade é o limitador principal
- transmissão por barramento sofre do mesmo problema que a rede por barramento tinha
    - uma conexão existente no barramento fecha a porta para outras
- comutação por rede de interconexão é uma das melhores
    - melhor desempenho (impede interrupções de conexão)
- quandos *buffers*, filas dos roteadores ficam cheios, os pacote começam a ser descartados
    - nesse momento priorização de pacotes se torna bastante importante 
- exemplo mais simples de administração de filas: Round-Robin 
    - é ruim porque n consegue administrar prioridade
    - mas é melhor que uma fila FCFS
- notação de vazão é em bit/s (notação brasileira, a americana é bps)
- é importante saber **quantos pacotes** o roteador pode transmitir
- é notavelmente melhor que uma quantidade menor de pacotes, mesmo que maiores, passe pelo roteador
    - menos leituras de cabeçalho = mais velocidade de processamento
    - maior quantidade de leitura torna onerosa as tarefas do processador do roteador
 
DATA: 09/Outubro/2025
# Introdução à Camada de Enlace
- Trabalho com a camada 2 do modelo OSI
- quadro/frame é contido dentro de uma rede
    - endereços de camada dois de outra rede não são visíveis
- roteadores não propagam broadcast
- HDLC - 2M
- PPP - 2M
- Serial - 2M
- Ethernet - 100G
- ADSL
- diferetes redes tem saboderes diferentes de layer 2
- SDH
- PDH
- NGSDH
- DWDM
- ATM
- Frame Relay
- dependendo de onde o dado passa é necessário segmentar o pacote
- ainda são pacotes, mas eles são quebrados em células sequanciais à depender do quadro
    - é tudo sempre remontado
- IPs públicos são vistos globalmente - podem perder funcionalidade por rede
    - por isso não de chumba o IP na placa
- IP é hierárquico, MAC address não
- camada de rede é fim-a-fim
- só dá pra ver MAC Address estando na mesma VLAN
- IP é independente, dá pra transitar por diversas tecnologias
- enlace cuida de comunicação lateral enlace-porta
- camada 2 não depende de algoritmo de roteamento
- FHSS - Bluetooth usa - salto em expectro de frequência
- nível 4 vê fim-a-fim - sem poder de ver as portas - garantir que a informação chegue corretamente pela camada 2 (validação de checksum)
- half e full duplex
    - dois sentidos não simultêneos (half)
    - bidirecioal - full
- cabos precisam ser blindados para evitar interferências eletro-magnéticas
- é importante saber o formato pra conseguir formatar os dados e fazer uma busca - camada superior precisa saber montar o dado
- sequências padrão entregam o começo de quadros - preâmbulos
- nessa camada algoritmos de anticolisão são necessários - CSMAICD
- limite de 1500 é por fatores históricos de RAM
- endereços MAC tem 48 bits
- frames têm, no mínimo, 46 bytes
- 
- frames e quadros são a mesma coisa
    - pacotes são compostos de quadros
- o datagrama ainda é o mesmo e a lógica de roteamento continua
    - o que muda aqui é só o meio de propagação
- camdas 4 e 2 precisam de garantia de entrega porque:
    - na 2 preciso entregar o stream de bits pra remontar o pacote do outro lado, do contrário ele se perde
    - na 4 preciso verificar que todos os pacotes são ínegros e podem remontar a mensagem
- para os hosts entenderem começos e finais de quadros, precisamos de técnicas
    - mais comuns ssão flags
    - *bit stuffing*
        - insere um bit contrário a cada 5
        - 000001000001
        - 111110111110
        - até protocolo USB usa
- detecção de erros utiliza bastante checksum
    - s/ correção ainda
- cada interface precisa de um endereço MAC independente

# Protocolo ARP
- cada adaptador tem um endereço exclusivo por máquina
- fabricante compra parte do endereço MAC pra fabricação
- plano (sem hierarquia)
- dá pra mover placas de rede entre computadores sem problemas
- preciso do endereço MAC de destino - se n tiver preciso do ARP pra encontrar - pra poder mandar o quadro corretamente
- tabelas ARP separadas por rede (não se conversam)
- como troubleshoot sempre dá pra settar um MAC numa porta
- comando flush de praxe pra limpar tudo

DATA: 16/Outubro/2025
# Controle de fluxo de detecção de erros
- taxa de envio ajustada à capacidade de transmissão evita erros de armazenamento
- cabo precisa de certificação justamente pra n perder capacidade com a idade (muita)
- detecção e tratamento de erros aqui já ajuda o sistema a não perder tempo
    - evita precisar abrir o TCP pra identificação
- erros normalmente são em rajadas e podem passar batido
- os fluxos de transmissão de dados podem se encerrar apeans evitando a transmissão de um ACK novo
- Abordagens possíveis no tratamento de erros:
    - Ignorar o erro
    - Eco (transmissão à origem dos dados recebidos)
    - Detectar e solicitar retransmissão
    - Detectar e corrigir os erros na recepção de forma automática
- Bit Error Rate:
    - simplesmente BER = NumDeBitsErrados/TotDeBitsTransmitidos
    - taxas de 10⁻⁶ é 1 bit errado em 1 milhão
    - bastante baixo - taxas maiores que essa em quantidade são sinais
- Quanto mais longo o quadro, mais bits ele tem e, consequentemente, maior a probabilidade de que um deles esteja com erro

DATA: 23/Outubro/2025
# Controle e Correção de Erros e o Protocolo HDLC
- ARQ
- tempo de propagação mais alto que transmissão pode ser um problema
- adição de informação (redundância) pode ser uma solução
    - consumo bem maior de banda